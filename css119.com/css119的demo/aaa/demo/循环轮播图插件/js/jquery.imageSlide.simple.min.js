;(function(b){function a(d,e){var c=this;c.wrap=d;c.ul=c.wrap.find(e.ul);c.li=c.ul.find(e.li);c.len=c.li.length;c.liWidth=c.li.outerWidth(true);c.liHeight=c.li.outerHeight(true);c.numBox=c.wrap.find(e.numBox);c.prev=c.wrap.find(e.prev);c.next=c.wrap.find(e.next);c.isAuto=e.isAuto;c.lazyLoad=e.lazyLoad;c.imgSrc=e.imgSrc;c.displayNum=e.displayNum;c.cur=e.cur;c.evt=e.evt;c.effect=e.effect;c.speed=e.speed;c.autoTime=e.autoTime;c.index=e.index;c.numBoxB=null;c.timer=null;c.direction=null;c.step=null;c.dbclicks=false;c.moveObj={};c.moveObj2={};c.prevIndex=0;c.init()}a.prototype={init:function(){var c=this;c.config();c.autoPlay();c.bind()},config:function(){var d=this;d.speed=d.speed>=d.autoTime?d.autoTime-100:d.speed;if(d.index<=0){d.index=0}else{if(d.index>=d.len){d.index=d.len-1}}if(d.displayNum){d.numBox.empty();for(var c=0;c<d.len;c++){d.numBox.append("<b>"+(c+1)+"</b>")}}d.numBoxB=d.numBox.children();d.numBoxB.eq(d.index).addClass(d.cur);if(d.lazyLoad){for(var e=0;e<d.len;e++){d.li.eq(e).append("<div class='loading-cover'></div>")}}d.lazyLoad&&d.loadImg(d.index);switch(d.effect){case 0:d.li.hide().eq(d.index).show();break;case 1:d.direction="left";d.step=d.liWidth;break;case 2:d.direction="top";d.step=d.liHeight;break}if(d.effect!=0){d.li.css(d.direction,d.step).eq(d.index).css(d.direction,0).addClass("prevIndexLi")}d.moveObj[d.direction]=0},move:function(){var c=this;if(!c.dbclicks){c.prevIndex=c.wrap.find(".prevIndexLi").index();if(arguments[0]==0){c.index<c.len-1?c.index++:c.index=0;if(c.effect!=0){c.moveObj2[c.direction]=-c.step;c.li.eq(c.index).css(c.direction,c.step)}}else{if(arguments[0]==1){c.index<=0?(c.index=c.len-1):c.index--;if(c.effect!=0){c.moveObj2[c.direction]=c.step;c.li.eq(c.index).css(c.direction,-c.step)}}else{if(c.prevIndex<c.index){c.moveObj2[c.direction]=-c.step;c.effect!=0&&c.li.eq(c.index).css(c.direction,c.step)}else{c.moveObj2[c.direction]=c.step;c.effect!=0&&c.li.eq(c.index).css(c.direction,-c.step)}}}c.li.removeClass("prevIndexLi").eq(c.index).addClass("prevIndexLi");switch(c.effect){case 0:c.li.stop(true,true).fadeOut(c.speed).eq(c.index).fadeIn(c.speed,function(){c.dbclicks=false;c.loadImg(c.index)});c.numBoxB.removeClass(c.cur).eq(c.index).addClass(c.cur);break;case 1:case 2:c.li.eq(c.prevIndex).stop(true,true).animate(c.moveObj2,c.speed);c.li.eq(c.index).stop(true,true).animate(c.moveObj,c.speed,function(){c.dbclicks=false;c.loadImg(c.index)});c.numBoxB.removeClass(c.cur).eq(c.index).addClass(c.cur);if(c.index==c.len){c.numBoxB.removeClass(c.cur).eq(0).addClass(c.cur)}break}}},loadImg:function(e,g){var d=this;if(d.lazyLoad){var f=d.li.eq(e).find("img");if(f.attr(d.imgSrc)){var c=new Image();c.src=f.attr(d.imgSrc);c.onload=function(){f.attr("src",c.src);f.removeAttr(d.imgSrc);d.li.eq(e).find(".loading-cover").remove();g&&typeof g=="function"&&g()}}}},autoPlay:function(){var c=this;clearInterval(c.timer);if(c.isAuto){c.timer=setInterval(function(){c.move(0)},c.autoTime)}},hoverStop:function(d){var c=this;d.hover(function(){clearInterval(c.timer)},function(){c.autoPlay()})},bind:function(){var c=this;c.hoverStop(c.li);if(c.evt==0){c.prev.hide();c.next.hide();var d;c.numBoxB.hover(function(){clearInterval(c.timer);if(!b(this).hasClass(c.cur)){c.index=c.numBoxB.index(this);d=setTimeout(function(){c.move()},200)}},function(){clearTimeout(d);c.autoPlay()})}else{if(c.evt==1){c.hoverStop(c.numBoxB);c.hoverStop(c.prev);c.hoverStop(c.next);c.numBoxB.click(function(){if(!b(this).hasClass(c.cur)){c.index=c.numBoxB.index(this);c.move()}});c.prev.click(function(){c.move(1);c.dbclicks=true});c.next.click(function(){c.move(0);c.dbclicks=true})}}}};b.fn.imageSlide=function(c){var d=b.extend({},b.fn.imageSlide.defaults,c);this.each(function(){new a(b(this),d)})};b.fn.imageSlide.defaults={index:0,ul:"ul",li:"li",numBox:".num",prev:".prev",next:".next",cur:"cur",isAuto:true,lazyLoad:false,imgSrc:"data-src",displayNum:true,evt:1,effect:1,speed:500,autoTime:5000}})(jQuery);