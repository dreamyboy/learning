/*
@plugName: jquery.thumSlide.js
@company: baidu.com
@author: by xudeming208@126.com
@data: 2013-06-08
@blog: http://www.css119.com
@example: 
	$(id).thumSlide({
		//初次显示第几张，从0开始
        index: 0,
        //显示的图片个数
        showNum: 3,
        //每次滚动的图片张数
        slideNum: 1,
        //ul
        ul: "ul",
        //li
        li: "li",
        //上一页的按钮名称
        prev: ".prev",
        //下一页的按钮名称
        next: ".next",
        //焦点样式
        cur: "cur",
        //图片滚动的类型,取值为0代表水平滚动或者1代表竖直滚动
        direction: 0,
        //是否启用图片延迟加载，提高网站初次载入的速度，延迟加载不适用于isMarquee
        lazyLoad: false,
        //延迟加载时，存储真正图片地址的属性名称
        imgSrc: "data-src",
        //是否循环滚动
        isLoop: false,
        //不循环的时候，不能再点击的时候，给按钮添加disable样式的名称
        disable: ["prev-disable", "next-disable"],
        //所有动画执行前的函数
        beforeFun: function() {},
        //是否是连续滚动
        isMarquee: false,
        //是否自动播放
        isAuto: false,
        //滑动的速度
        speed: 500,
        //图片自动滚动的时候，间隔滚动的时间；当isMarquee为true的时候，相当于运行速度,数值越大，滚动的越慢。
        autoTime: 5000
	});
*/
;(function(b){function a(d,e){var c=this;c.wrap=d;c.showNum=e.showNum;c.slideNum=e.slideNum;c.obj=c.wrap.find(e.ul);c.li=c.obj.find(e.li);c.len=c.li.length;c.prev=c.wrap.find(e.prev);c.next=c.wrap.find(e.next);c.cur=e.cur;c.disable=e.disable;c.beforeFun=e.beforeFun;c.lazyLoad=e.lazyLoad;c.imgSrc=e.imgSrc;e.direction==0&&(c.direction="left");e.direction==1&&(c.direction="top");c.isMarquee=e.isMarquee;c.isLoop=e.isLoop;c.isAuto=e.isAuto;c.speed=e.speed;c.autoTime=e.autoTime;c.index=e.index;c.outerWH=0;c.dirObj={};c.timer=null;c.dbclicks=false;c.slideL=false;c.init()}a.prototype={init:function(){var c=this;c.beforeFun&&typeof c.beforeFun=="function"&&c.beforeFun();c.config();c.marqueeSet();c.autoPlay();c.bind()},config:function(){var e=this;var d=e.li.outerWidth(true),g=e.li.outerHeight(true);if(e.index<=0){e.index=0}else{if(e.index>=e.len){e.index=e.len-1}}if(e.lazyLoad){for(var j=0;j<e.len;j++){e.li.eq(j).append("<div class='loading-cover'></div>")}}switch(e.direction){case"left":e.outerWH=d;e.obj.parent().width(e.showNum*d+"px").height(g);e.wrap.width(e.obj.parent().outerWidth(true)+e.prev.outerWidth(true)+e.next.outerWidth(true)+"px").height(e.obj.parent().outerHeight(true));break;case"top":e.outerWH=g;e.obj.parent().height(e.showNum*g+"px").width(d);e.wrap.height(e.obj.parent().outerHeight(true)+e.prev.outerHeight(true)+e.next.outerHeight(true)+"px").width(e.obj.parent().outerWidth(true));break}if(e.isLoop){e.obj.children().clone().appendTo(e.obj).clone().prependTo(e.obj);switch(e.direction){case"left":e.obj.width(e.len*d*3+"px");break;case"top":e.obj.height(e.len*g*3+"px");break}e.obj.css(e.direction,-(e.len+e.index)*e.outerWH+"px");var c=e.obj.children();e.li.removeClass(e.cur).eq(e.index).addClass(e.cur)}else{e.li.removeClass(e.cur).eq(e.index).addClass(e.cur);e.obj.css(e.direction,-e.index*e.outerWH+"px");if(!e.isMarquee){e.index==0&&e.prev.addClass(e.disable[0]);if(e.showNum>=e.len-e.index){e.next.addClass(e.disable[1])}}switch(e.direction){case"left":e.obj.width(e.len*d+"px");break;case"top":e.obj.height(e.len*g+"px");break}}e.totalLi=e.obj.children();if(e.lazyLoad){for(var f=0;f<e.showNum;f++){if(e.isLoop){e.loadImg(e.totalLi.eq(f+e.index+e.len))}else{e.loadImg(e.li.eq(-parseInt(e.obj.css("left"))/e.outerWH+f))}}}},move:function(){var c=this;if(c.isLoop){switch(arguments[0]){case 1:c.dirObj[c.direction]=-(c.len-c.slideNum+c.index)*c.outerWH+"px";c.obj.stop(true,true).animate(c.dirObj,c.speed,function(){for(var d=0;d<c.slideNum;d++){c.obj.children().last().prependTo(c.obj)}c.lazyLoadFun(0);c.dbclicks=false;c.obj.css(c.direction,-(c.len+c.index)*c.outerWH+"px")});break;case 2:c.dirObj[c.direction]=-(c.len+c.slideNum+c.index)*c.outerWH+"px";c.obj.stop(true,true).animate(c.dirObj,c.speed,function(){for(var d=0;d<c.slideNum;d++){c.obj.children().first().appendTo(c.obj)}c.lazyLoadFun(1);c.dbclicks=false;c.obj.css(c.direction,-(c.len+c.index)*c.outerWH+"px")});break}}else{switch(arguments[0]){case 1:c.index-=c.slideNum;c.dirObj[c.direction]=-c.index*c.outerWH+"px";if(c.index<c.len-c.showNum){c.next.removeClass(c.disable[1])}c.obj.stop(true,true).animate(c.dirObj,c.speed,function(){if(c.index<=0){c.prev.addClass(c.disable[0])}c.lazyLoadFun(0);c.dbclicks=false});break;case 2:c.index+=c.slideNum;c.dirObj[c.direction]=-c.index*c.outerWH+"px";if(c.index>0){c.prev.removeClass(c.disable[0])}c.obj.stop(true,true).animate(c.dirObj,c.speed,function(){if(c.index>=c.len-c.showNum){c.next.addClass(c.disable[1])}c.lazyLoadFun(1);c.dbclicks=false});break}}},marqueeSet:function(){var c=this;if(c.isMarquee&&!c.isLoop){c.obj.css(c.direction,c.showNum*c.outerWH+"px")}},marquee:function(){var c=this;if(c.isMarquee){var d=parseFloat(c.obj.css(c.direction));switch(arguments[0]){case 1:c.dirObj[c.direction]=d+2+"px";c.obj.stop(true,true).animate(c.dirObj,0,function(){if(c.isLoop&&d>=0){for(var e=0;e<c.len;e++){c.obj.children().last().prependTo(c.obj)}c.obj.css(c.direction,-c.len*c.outerWH+"px")}else{if(!c.isLoop&&d>=c.showNum*c.outerWH){c.obj.css(c.direction,-c.len*c.outerWH+"px")}}});break;case 2:c.dirObj[c.direction]=d-2+"px";c.obj.stop(true,true).animate(c.dirObj,0,function(){if(c.isLoop&&d<=-(c.len-(c.showNum-c.len)/2)*c.outerWH*2){for(var e=0;e<c.len;e++){c.obj.children().first().appendTo(c.obj)}c.obj.css(c.direction,-(c.len*2-c.showNum)*c.outerWH+"px")}else{if(!c.isLoop&&d<=-c.len*c.outerWH){c.obj.css(c.direction,c.showNum*c.outerWH+"px")}}});break}}},loadImg:function(e,g){var d=this;if(d.lazyLoad){var f=e.find("img");if(f.attr(d.imgSrc)){var c=new Image();c.src=f.attr(d.imgSrc);c.onload=function(){f.attr("src",c.src).removeAttr(d.imgSrc);e.find(".loading-cover").remove();g&&typeof g=="function"&&g()}}}},lazyLoadFun:function(c){var d=this;if(d.lazyLoad){d.totalLi=d.obj.children();var f=null;for(var e=0;e<d.slideNum;e++){switch(c){case 0:if(d.isLoop){f=d.len+d.index+e}else{f=d.index+e}break;case 1:if(d.isLoop){f=d.len+d.index+d.showNum-d.slideNum+e}else{f=d.index+d.showNum-d.slideNum+e}}if(d.isLoop){d.loadImg(d.totalLi.eq(f))}else{d.loadImg(d.li.eq(f))}}}},autoPlay:function(){var c=this;clearInterval(c.timer);if(c.isAuto){c.timer=setInterval(function(){!c.isMarquee&&c.slideL&&c.move(1);!c.isMarquee&&!c.slideL&&c.move(2);c.isMarquee&&c.slideL&&c.marquee(1);c.isMarquee&&!c.slideL&&c.marquee(2)},c.autoTime)}},bind:function(){var c=this;c.prev.bind("click",function(){if(!b(this).hasClass(c.disable[0])){clearInterval(c.timer);!c.isMarquee&&!c.dbclicks&&c.move(1);c.isMarquee&&!c.isAuto&&c.marquee(1);c.dbclicks=true;c.slideL=true}});c.next.bind("click",function(){if(!b(this).hasClass(c.disable[1])){clearInterval(c.timer);!c.isMarquee&&!c.dbclicks&&c.move(2);c.isMarquee&&!c.isAuto&&c.marquee(2);c.dbclicks=true;c.slideL=false}});c.totalLi.bind("click",function(){clearInterval(c.timer);c.totalLi.removeClass(c.cur);b(this).addClass(c.cur)});c.wrap.hover(function(){clearInterval(c.timer)},function(){c.autoPlay()})}};b.fn.thumSlide=function(c){var d=b.extend({},b.fn.thumSlide.defaults,c);this.each(function(){new a(b(this),d)})};b.fn.thumSlide.defaults={index:0,showNum:3,slideNum:1,ul:"ul",li:"li",prev:".prev",next:".next",cur:"cur",direction:0,lazyLoad:false,imgSrc:"data-src",isLoop:false,disable:["prev-disable","next-disable"],beforeFun:function(){},isMarquee:false,isAuto:false,speed:500,autoTime:5000}})(jQuery);